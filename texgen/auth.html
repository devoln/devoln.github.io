<html>
<head>
<title>SynthGen Auth</title>
</head>

<body>
<script>
const serverAddress = "https://devoln.herokuapp.com"
function send() {
	let xhr = new XMLHttpRequest();
	xhr.open('POST', serverAddress + "/github/auth" + window.location.search, true);
	xhr.send();
	xhr.onreadystatechange = function()
	{
		if(xhr.readyState !== 4) return;
		if(xhr.status !== 200)
			alert("Error:\n" + xhr.status + ': ' + xhr.statusText);
		else
		{
			const resp = JSON.parse(xhr.response);
			if(resp)
			{
				document.cookie = "userToken=" + resp.token + "; path=/";
				document.cookie = "userLogin=" + resp.login + "; path=/";
				document.cookie = "userID=" + resp.id + "; path=/";
			}
		}
		window.close();
	}
}
send();
</script>
</body>
</html>
