function Base64ToBuffer(c){c=atob(c);var d=new Uint8Array(c.length);Array.prototype.forEach.call(c,function(c,a){d[a]=c.charCodeAt(0)});return d}
var DB={Insert:function(c,d,e){var a=new XMLHttpRequest;c={app:"815d6c32a3884ee5b7382faf349138b0",cli:"e95b39465c1a4fcdbcf4da2dd08736e5",coll:c,doc:d};a.open("POST","https://api.scorocode.ru/api/v1/data/insert",!0);a.setRequestHeader("Content-Type","application/json");a.onreadystatechange=function(){if(4==a.readyState)if(200!=a.status)PrintError("Error inserting to DB:\nstatus: "+a.status+": "+a.statusText);else{var b=JSON.parse(a.responseText);b.error?b.result&&b.result.startsWith("ALREADY_EXISTS_ID:")?
(b.result={_id:b.result.substr(18),duplicate:!0},e(b.result)):PrintError("Error inserting to DB:\n"+b.errMsg+"\nresult: "+b.result):(b.result.duplicate=!1,e(b.result))}};a.send(JSON.stringify(c))},ReadById:function(c,d,e,a){DB.Query(c,{_id:{$eq:d}},function(b){void 0!==b[0]&&a(b[0])},{fields:e,limit:1})},Query:function(c,d,e,a){var b=new XMLHttpRequest;c={app:"815d6c32a3884ee5b7382faf349138b0",cli:"e95b39465c1a4fcdbcf4da2dd08736e5",coll:c,query:d};a&&(a.limit&&(c.limit=a.limit),a.limit&&(c.skip=a.skip),
a.fields&&(c.fields=a.fields));b.open("POST","https://api.scorocode.ru/api/v1/data/find",!0);b.setRequestHeader("Content-Type","application/json");b.onreadystatechange=function(){if(4==this.readyState)if(200!=b.status)alert("Error querying from DB:\n"+b.status+": "+b.statusText);else{var a=JSON.parse(b.responseText);a.error?alert("Error querying from DB:\n"+b.errMsg):e(BSON.deserialize(Base64ToBuffer(a.result)))}};b.send(JSON.stringify(c))}};